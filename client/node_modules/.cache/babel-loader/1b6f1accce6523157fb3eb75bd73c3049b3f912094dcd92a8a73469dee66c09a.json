{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\laame\\\\Desktop\\\\websemantique\\\\WS_SmartHealth\\\\client\\\\src\\\\components\\\\Habitude\\\\SaifAIChat.jsx\",\n  _s = $RefreshSig$();\n// src/components/Habitude/SaifAIChat.jsx\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { SaifAIManager } from \"../../api/saifAiApi\";\nimport { useAuth } from \"../../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SaifAIChat = _ref => {\n  _s();\n  let {\n    onHabitudesUpdate,\n    modeIntelligent = true\n  } = _ref;\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [conversationHistory, setConversationHistory] = useState([]);\n  const messagesEndRef = useRef(null);\n  const {\n    user\n  } = useAuth();\n\n  // ‚úÖ Scroll vers le bas\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // ‚úÖ Initialiser la conversation\n  useEffect(() => {\n    const messageInitial = {\n      id: Date.now(),\n      type: \"ai\",\n      content: \"üëã Bonjour ! Je suis Saif AI. Je peux vous aider √† g√©rer vos habitudes de sant√©. Que souhaitez-vous faire ?\",\n      timestamp: new Date().toISOString()\n    };\n    setMessages([messageInitial]);\n  }, []);\n\n  // ‚úÖ Envoyer un message\n  const envoyerMessage = async () => {\n    if (!inputMessage.trim() || isLoading) return;\n    const messageUtilisateur = {\n      id: Date.now(),\n      type: \"user\",\n      content: inputMessage,\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, messageUtilisateur]);\n    setInputMessage(\"\");\n    setIsLoading(true);\n    try {\n      let reponseAI;\n      if (modeIntelligent) {\n        // üß† Mode Saif AI intelligent\n        reponseAI = await SaifAIManager.gerereRequeteComplexe(inputMessage, user);\n      } else {\n        // ‚ö° Mode classique\n        reponseAI = await SaifAIManager.executer(inputMessage, {\n          userId: user === null || user === void 0 ? void 0 : user.email\n        }, true);\n      }\n\n      // Traiter la r√©ponse\n      traiterReponseAI(reponseAI, inputMessage);\n    } catch (error) {\n      console.error(\"‚ùå Erreur Saif AI:\", error);\n      const messageErreur = {\n        id: Date.now() + 1,\n        type: \"ai\",\n        content: \"‚ùå D√©sol√©, je n'ai pas pu traiter votre demande. Pouvez-vous reformuler ?\",\n        timestamp: new Date().toISOString(),\n        isError: true\n      };\n      setMessages(prev => [...prev, messageErreur]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // ‚úÖ Traiter la r√©ponse AI\n  const traiterReponseAI = (reponseAI, promptOriginal) => {\n    var _execution$resultat, _execution$resultat$r, _execution$resultat$r2, _execution$resultat2;\n    const {\n      analyse,\n      execution\n    } = reponseAI;\n    let contenuMessage = \"\";\n    let actions = [];\n\n    // Construire le message en fonction de l'analyse\n    switch (analyse.intention) {\n      case \"create\":\n        contenuMessage = \"\\u2705 J'ai cr\\xE9\\xE9 une nouvelle habitude \\\"\".concat(analyse.entite.type, \"\\\"\");\n        if (execution.resultat) {\n          contenuMessage += \" avec succ√®s !\";\n          actions.push({\n            type: \"refresh\",\n            label: \"üîÑ Voir les habitudes\"\n          });\n        }\n        break;\n      case \"read\":\n        if (((_execution$resultat = execution.resultat) === null || _execution$resultat === void 0 ? void 0 : (_execution$resultat$r = _execution$resultat.results) === null || _execution$resultat$r === void 0 ? void 0 : (_execution$resultat$r2 = _execution$resultat$r.bindings) === null || _execution$resultat$r2 === void 0 ? void 0 : _execution$resultat$r2.length) > 0) {\n          const nbResultats = execution.resultat.results.bindings.length;\n          contenuMessage = \"\\uD83D\\uDD0D J'ai trouv\\xE9 \".concat(nbResultats, \" habitude(s) correspondant \\xE0 votre recherche\");\n          actions.push({\n            type: \"show_results\",\n            label: \"üìã Afficher les r√©sultats\",\n            data: execution.resultat\n          });\n        } else {\n          contenuMessage = \"üîç Aucune habitude trouv√©e avec ces crit√®res\";\n        }\n        break;\n      case \"analyze\":\n        contenuMessage = \"üìä Voici l'analyse de vos habitudes :\";\n        actions.push({\n          type: \"show_analysis\",\n          label: \"üìà Voir l'analyse\",\n          data: execution.resultat\n        });\n        break;\n      default:\n        contenuMessage = ((_execution$resultat2 = execution.resultat) === null || _execution$resultat2 === void 0 ? void 0 : _execution$resultat2.message) || \"‚úÖ Op√©ration effectu√©e avec succ√®s\";\n    }\n\n    // Ajouter des suggestions contextuelles\n    if (execution.suggestions && execution.suggestions.length > 0) {\n      contenuMessage += \"\\n\\nüí° \" + execution.suggestions.join(\"\\nüí° \");\n    }\n    const messageAI = {\n      id: Date.now(),\n      type: \"ai\",\n      content: contenuMessage,\n      timestamp: new Date().toISOString(),\n      analyse: analyse,\n      execution: execution,\n      actions: actions\n    };\n    setMessages(prev => [...prev, messageAI]);\n\n    // Mettre √† jour les habitudes si n√©cessaire\n    if ([\"create\", \"update\", \"delete\"].includes(analyse.intention)) {\n      onHabitudesUpdate === null || onHabitudesUpdate === void 0 ? void 0 : onHabitudesUpdate();\n    }\n  };\n\n  // ‚úÖ G√©rer les actions\n  const gererAction = (action, data) => {\n    switch (action.type) {\n      case \"refresh\":\n        onHabitudesUpdate === null || onHabitudesUpdate === void 0 ? void 0 : onHabitudesUpdate();\n        break;\n      case \"show_results\":\n        afficherResultats(data);\n        break;\n      case \"show_analysis\":\n        afficherAnalyse(data);\n        break;\n      default:\n        console.log(\"Action non g√©r√©e:\", action);\n    }\n  };\n\n  // ‚úÖ Afficher les r√©sultats\n  const afficherResultats = data => {\n    const habitudes = data.results.bindings.map((item, index) => {\n      var _item$titre, _item$type, _item$type$value, _item$desc;\n      return {\n        id: index,\n        titre: ((_item$titre = item.titre) === null || _item$titre === void 0 ? void 0 : _item$titre.value) || \"Sans titre\",\n        type: ((_item$type = item.type) === null || _item$type === void 0 ? void 0 : (_item$type$value = _item$type.value) === null || _item$type$value === void 0 ? void 0 : _item$type$value.split('#')[1]) || \"Inconnu\",\n        description: ((_item$desc = item.desc) === null || _item$desc === void 0 ? void 0 : _item$desc.value) || \"\"\n      };\n    });\n    const messageResultats = {\n      id: Date.now(),\n      type: \"ai\",\n      content: \"üìã **R√©sultats de votre recherche :**\\n\\n\" + habitudes.map(h => \"\\u2022 \".concat(h.titre, \" (\").concat(h.type, \")\")).join('\\n'),\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, messageResultats]);\n  };\n\n  // ‚úÖ Afficher l'analyse\n  const afficherAnalyse = data => {\n    // Impl√©mentation simplifi√©e - √† enrichir selon les donn√©es\n    const messageAnalyse = {\n      id: Date.now(),\n      type: \"ai\",\n      content: \"üìä **Analyse d√©taill√©e :**\\n\\n\" + \"‚Ä¢ Nombre total d'habitudes: ...\\n\" + \"‚Ä¢ R√©partition par type: ...\\n\" + \"‚Ä¢ Tendances r√©centes: ...\",\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, messageAnalyse]);\n  };\n\n  // ‚úÖ G√©rer la touche Entr√©e\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      envoyerMessage();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      bottom: '20px',\n      right: '20px',\n      width: '400px',\n      height: '500px',\n      backgroundColor: 'white',\n      borderRadius: '15px',\n      boxShadow: '0 5px 25px rgba(0,0,0,0.2)',\n      display: 'flex',\n      flexDirection: 'column',\n      zIndex: 1000,\n      border: '2px solid #3498db'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px',\n        backgroundColor: '#3498db',\n        color: 'white',\n        borderRadius: '15px 15px 0 0',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '10px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '32px',\n          height: '32px',\n          backgroundColor: '#2ecc71',\n          borderRadius: '50%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          fontWeight: 'bold'\n        },\n        children: \"\\uD83E\\uDDE0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold',\n            fontSize: '1.1em'\n          },\n          children: \"Saif AI Assistant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.8em',\n            opacity: 0.8\n          },\n          children: modeIntelligent ? 'Mode Intelligent Activ√©' : 'Mode Classique'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        padding: '15px',\n        overflowY: 'auto',\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '10px'\n      },\n      children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignSelf: message.type === 'user' ? 'flex-end' : 'flex-start',\n          maxWidth: '80%',\n          padding: '10px 15px',\n          borderRadius: '15px',\n          backgroundColor: message.type === 'user' ? '#3498db' : '#f1f2f6',\n          color: message.type === 'user' ? 'white' : '#333',\n          border: message.isError ? '1px solid #e74c3c' : 'none'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            whiteSpace: 'pre-wrap'\n          },\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), message.actions && message.actions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '8px',\n            display: 'flex',\n            gap: '5px',\n            flexWrap: 'wrap'\n          },\n          children: message.actions.map((action, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              var _message$execution;\n              return gererAction(action, (_message$execution = message.execution) === null || _message$execution === void 0 ? void 0 : _message$execution.resultat);\n            },\n            style: {\n              padding: '4px 8px',\n              backgroundColor: '#2ecc71',\n              color: 'white',\n              border: 'none',\n              borderRadius: '12px',\n              fontSize: '0.7em',\n              cursor: 'pointer'\n            },\n            children: action.label\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.7em',\n            opacity: 0.6,\n            marginTop: '5px',\n            textAlign: message.type === 'user' ? 'right' : 'left'\n          },\n          children: new Date(message.timestamp).toLocaleTimeString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          alignSelf: 'flex-start',\n          padding: '10px 15px',\n          borderRadius: '15px',\n          backgroundColor: '#f1f2f6'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '20px',\n              height: '20px',\n              border: '2px solid #f3f3f3',\n              borderTop: '2px solid #3498db',\n              borderRadius: '50%',\n              animation: 'spin 1s linear infinite'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Saif AI r\\xE9fl\\xE9chit...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '15px',\n        borderTop: '1px solid #eee'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: inputMessage,\n          onChange: e => setInputMessage(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Posez votre question \\xE0 Saif AI...\",\n          style: {\n            flex: 1,\n            padding: '10px',\n            border: '1px solid #ddd',\n            borderRadius: '20px',\n            resize: 'none',\n            minHeight: '40px',\n            maxHeight: '100px',\n            fontFamily: 'inherit'\n          },\n          rows: \"1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: envoyerMessage,\n          disabled: isLoading || !inputMessage.trim(),\n          style: {\n            padding: '10px 15px',\n            backgroundColor: isLoading || !inputMessage.trim() ? '#bdc3c7' : '#3498db',\n            color: 'white',\n            border: 'none',\n            borderRadius: '20px',\n            cursor: isLoading || !inputMessage.trim() ? 'not-allowed' : 'pointer',\n            minWidth: '50px'\n          },\n          children: isLoading ? '‚è≥' : 'üöÄ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px',\n          display: 'flex',\n          gap: '5px',\n          flexWrap: 'wrap'\n        },\n        children: [\"Montre mes habitudes\", \"Cr√©e une habitude sommeil\", \"Statistiques\"].map(suggestion => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setInputMessage(suggestion),\n          style: {\n            padding: '4px 8px',\n            backgroundColor: '#ecf0f1',\n            border: '1px solid #bdc3c7',\n            borderRadius: '12px',\n            fontSize: '0.7em',\n            cursor: 'pointer'\n          },\n          children: suggestion\n        }, suggestion, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: \"\\n        @keyframes spin {\\n          0% { transform: rotate(0deg); }\\n          100% { transform: rotate(360deg); }\\n        }\\n      \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this);\n};\n_s(SaifAIChat, \"nt9dOxqVUyk3GCJGXilSTo3GOec=\", false, function () {\n  return [useAuth];\n});\n_c = SaifAIChat;\nexport default SaifAIChat;\nvar _c;\n$RefreshReg$(_c, \"SaifAIChat\");","map":{"version":3,"names":["React","useState","useRef","useEffect","SaifAIManager","useAuth","jsxDEV","_jsxDEV","SaifAIChat","_ref","_s","onHabitudesUpdate","modeIntelligent","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","conversationHistory","setConversationHistory","messagesEndRef","user","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","messageInitial","id","Date","now","type","content","timestamp","toISOString","envoyerMessage","trim","messageUtilisateur","prev","reponseAI","gerereRequeteComplexe","executer","userId","email","traiterReponseAI","error","console","messageErreur","isError","promptOriginal","_execution$resultat","_execution$resultat$r","_execution$resultat$r2","_execution$resultat2","analyse","execution","contenuMessage","actions","intention","concat","entite","resultat","push","label","results","bindings","length","nbResultats","data","message","suggestions","join","messageAI","includes","gererAction","action","afficherResultats","afficherAnalyse","log","habitudes","map","item","index","_item$titre","_item$type","_item$type$value","_item$desc","titre","value","split","description","desc","messageResultats","h","messageAnalyse","handleKeyPress","e","key","shiftKey","preventDefault","style","position","bottom","right","width","height","backgroundColor","borderRadius","boxShadow","display","flexDirection","zIndex","border","children","padding","color","alignItems","gap","justifyContent","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","opacity","flex","overflowY","alignSelf","maxWidth","whiteSpace","marginTop","flexWrap","onClick","_message$execution","cursor","textAlign","toLocaleTimeString","borderTop","animation","ref","onChange","target","onKeyPress","placeholder","resize","minHeight","maxHeight","fontFamily","rows","disabled","minWidth","suggestion","jsx","_c","$RefreshReg$"],"sources":["C:/Users/laame/Desktop/websemantique/WS_SmartHealth/client/src/components/Habitude/SaifAIChat.jsx"],"sourcesContent":["// src/components/Habitude/SaifAIChat.jsx\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { SaifAIManager } from \"../../api/saifAiApi\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nconst SaifAIChat = ({ onHabitudesUpdate, modeIntelligent = true }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [conversationHistory, setConversationHistory] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n  const { user } = useAuth();\r\n\r\n  // ‚úÖ Scroll vers le bas\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // ‚úÖ Initialiser la conversation\r\n  useEffect(() => {\r\n    const messageInitial = {\r\n      id: Date.now(),\r\n      type: \"ai\",\r\n      content: \"üëã Bonjour ! Je suis Saif AI. Je peux vous aider √† g√©rer vos habitudes de sant√©. Que souhaitez-vous faire ?\",\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    setMessages([messageInitial]);\r\n  }, []);\r\n\r\n  // ‚úÖ Envoyer un message\r\n  const envoyerMessage = async () => {\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const messageUtilisateur = {\r\n      id: Date.now(),\r\n      type: \"user\",\r\n      content: inputMessage,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setMessages(prev => [...prev, messageUtilisateur]);\r\n    setInputMessage(\"\");\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      let reponseAI;\r\n\r\n      if (modeIntelligent) {\r\n        // üß† Mode Saif AI intelligent\r\n        reponseAI = await SaifAIManager.gerereRequeteComplexe(inputMessage, user);\r\n      } else {\r\n        // ‚ö° Mode classique\r\n        reponseAI = await SaifAIManager.executer(inputMessage, { userId: user?.email }, true);\r\n      }\r\n\r\n      // Traiter la r√©ponse\r\n      traiterReponseAI(reponseAI, inputMessage);\r\n\r\n    } catch (error) {\r\n      console.error(\"‚ùå Erreur Saif AI:\", error);\r\n      \r\n      const messageErreur = {\r\n        id: Date.now() + 1,\r\n        type: \"ai\",\r\n        content: \"‚ùå D√©sol√©, je n'ai pas pu traiter votre demande. Pouvez-vous reformuler ?\",\r\n        timestamp: new Date().toISOString(),\r\n        isError: true\r\n      };\r\n      \r\n      setMessages(prev => [...prev, messageErreur]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Traiter la r√©ponse AI\r\n  const traiterReponseAI = (reponseAI, promptOriginal) => {\r\n    const { analyse, execution } = reponseAI;\r\n\r\n    let contenuMessage = \"\";\r\n    let actions = [];\r\n\r\n    // Construire le message en fonction de l'analyse\r\n    switch (analyse.intention) {\r\n      case \"create\":\r\n        contenuMessage = `‚úÖ J'ai cr√©√© une nouvelle habitude \"${analyse.entite.type}\"`;\r\n        if (execution.resultat) {\r\n          contenuMessage += \" avec succ√®s !\";\r\n          actions.push({ type: \"refresh\", label: \"üîÑ Voir les habitudes\" });\r\n        }\r\n        break;\r\n\r\n      case \"read\":\r\n        if (execution.resultat?.results?.bindings?.length > 0) {\r\n          const nbResultats = execution.resultat.results.bindings.length;\r\n          contenuMessage = `üîç J'ai trouv√© ${nbResultats} habitude(s) correspondant √† votre recherche`;\r\n          actions.push({ type: \"show_results\", label: \"üìã Afficher les r√©sultats\", data: execution.resultat });\r\n        } else {\r\n          contenuMessage = \"üîç Aucune habitude trouv√©e avec ces crit√®res\";\r\n        }\r\n        break;\r\n\r\n      case \"analyze\":\r\n        contenuMessage = \"üìä Voici l'analyse de vos habitudes :\";\r\n        actions.push({ type: \"show_analysis\", label: \"üìà Voir l'analyse\", data: execution.resultat });\r\n        break;\r\n\r\n      default:\r\n        contenuMessage = execution.resultat?.message || \"‚úÖ Op√©ration effectu√©e avec succ√®s\";\r\n    }\r\n\r\n    // Ajouter des suggestions contextuelles\r\n    if (execution.suggestions && execution.suggestions.length > 0) {\r\n      contenuMessage += \"\\n\\nüí° \" + execution.suggestions.join(\"\\nüí° \");\r\n    }\r\n\r\n    const messageAI = {\r\n      id: Date.now(),\r\n      type: \"ai\",\r\n      content: contenuMessage,\r\n      timestamp: new Date().toISOString(),\r\n      analyse: analyse,\r\n      execution: execution,\r\n      actions: actions\r\n    };\r\n\r\n    setMessages(prev => [...prev, messageAI]);\r\n\r\n    // Mettre √† jour les habitudes si n√©cessaire\r\n    if ([\"create\", \"update\", \"delete\"].includes(analyse.intention)) {\r\n      onHabitudesUpdate?.();\r\n    }\r\n  };\r\n\r\n  // ‚úÖ G√©rer les actions\r\n  const gererAction = (action, data) => {\r\n    switch (action.type) {\r\n      case \"refresh\":\r\n        onHabitudesUpdate?.();\r\n        break;\r\n      \r\n      case \"show_results\":\r\n        afficherResultats(data);\r\n        break;\r\n      \r\n      case \"show_analysis\":\r\n        afficherAnalyse(data);\r\n        break;\r\n      \r\n      default:\r\n        console.log(\"Action non g√©r√©e:\", action);\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Afficher les r√©sultats\r\n  const afficherResultats = (data) => {\r\n    const habitudes = data.results.bindings.map((item, index) => ({\r\n      id: index,\r\n      titre: item.titre?.value || \"Sans titre\",\r\n      type: item.type?.value?.split('#')[1] || \"Inconnu\",\r\n      description: item.desc?.value || \"\"\r\n    }));\r\n\r\n    const messageResultats = {\r\n      id: Date.now(),\r\n      type: \"ai\",\r\n      content: \"üìã **R√©sultats de votre recherche :**\\n\\n\" + \r\n               habitudes.map(h => `‚Ä¢ ${h.titre} (${h.type})`).join('\\n'),\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setMessages(prev => [...prev, messageResultats]);\r\n  };\r\n\r\n  // ‚úÖ Afficher l'analyse\r\n  const afficherAnalyse = (data) => {\r\n    // Impl√©mentation simplifi√©e - √† enrichir selon les donn√©es\r\n    const messageAnalyse = {\r\n      id: Date.now(),\r\n      type: \"ai\",\r\n      content: \"üìä **Analyse d√©taill√©e :**\\n\\n\" +\r\n               \"‚Ä¢ Nombre total d'habitudes: ...\\n\" +\r\n               \"‚Ä¢ R√©partition par type: ...\\n\" +\r\n               \"‚Ä¢ Tendances r√©centes: ...\",\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    setMessages(prev => [...prev, messageAnalyse]);\r\n  };\r\n\r\n  // ‚úÖ G√©rer la touche Entr√©e\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      envoyerMessage();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      bottom: '20px',\r\n      right: '20px',\r\n      width: '400px',\r\n      height: '500px',\r\n      backgroundColor: 'white',\r\n      borderRadius: '15px',\r\n      boxShadow: '0 5px 25px rgba(0,0,0,0.2)',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      zIndex: 1000,\r\n      border: '2px solid #3498db'\r\n    }}>\r\n      {/* En-t√™te */}\r\n      <div style={{\r\n        padding: '15px',\r\n        backgroundColor: '#3498db',\r\n        color: 'white',\r\n        borderRadius: '15px 15px 0 0',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '10px'\r\n      }}>\r\n        <div style={{\r\n          width: '32px',\r\n          height: '32px',\r\n          backgroundColor: '#2ecc71',\r\n          borderRadius: '50%',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          fontWeight: 'bold'\r\n        }}>\r\n          üß†\r\n        </div>\r\n        <div>\r\n          <div style={{ fontWeight: 'bold', fontSize: '1.1em' }}>Saif AI Assistant</div>\r\n          <div style={{ fontSize: '0.8em', opacity: 0.8 }}>\r\n            {modeIntelligent ? 'Mode Intelligent Activ√©' : 'Mode Classique'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div style={{\r\n        flex: 1,\r\n        padding: '15px',\r\n        overflowY: 'auto',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '10px'\r\n      }}>\r\n        {messages.map((message) => (\r\n          <div\r\n            key={message.id}\r\n            style={{\r\n              alignSelf: message.type === 'user' ? 'flex-end' : 'flex-start',\r\n              maxWidth: '80%',\r\n              padding: '10px 15px',\r\n              borderRadius: '15px',\r\n              backgroundColor: message.type === 'user' ? '#3498db' : '#f1f2f6',\r\n              color: message.type === 'user' ? 'white' : '#333',\r\n              border: message.isError ? '1px solid #e74c3c' : 'none'\r\n            }}\r\n          >\r\n            <div style={{ whiteSpace: 'pre-wrap' }}>{message.content}</div>\r\n            \r\n            {/* Actions */}\r\n            {message.actions && message.actions.length > 0 && (\r\n              <div style={{ marginTop: '8px', display: 'flex', gap: '5px', flexWrap: 'wrap' }}>\r\n                {message.actions.map((action, index) => (\r\n                  <button\r\n                    key={index}\r\n                    onClick={() => gererAction(action, message.execution?.resultat)}\r\n                    style={{\r\n                      padding: '4px 8px',\r\n                      backgroundColor: '#2ecc71',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      borderRadius: '12px',\r\n                      fontSize: '0.7em',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    {action.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n            \r\n            <div style={{\r\n              fontSize: '0.7em',\r\n              opacity: 0.6,\r\n              marginTop: '5px',\r\n              textAlign: message.type === 'user' ? 'right' : 'left'\r\n            }}>\r\n              {new Date(message.timestamp).toLocaleTimeString()}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        \r\n        {isLoading && (\r\n          <div style={{\r\n            alignSelf: 'flex-start',\r\n            padding: '10px 15px',\r\n            borderRadius: '15px',\r\n            backgroundColor: '#f1f2f6'\r\n          }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n              <div style={{ \r\n                width: '20px', \r\n                height: '20px', \r\n                border: '2px solid #f3f3f3',\r\n                borderTop: '2px solid #3498db',\r\n                borderRadius: '50%',\r\n                animation: 'spin 1s linear infinite'\r\n              }}></div>\r\n              <span>Saif AI r√©fl√©chit...</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div style={{\r\n        padding: '15px',\r\n        borderTop: '1px solid #eee'\r\n      }}>\r\n        <div style={{ display: 'flex', gap: '10px' }}>\r\n          <textarea\r\n            value={inputMessage}\r\n            onChange={(e) => setInputMessage(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Posez votre question √† Saif AI...\"\r\n            style={{\r\n              flex: 1,\r\n              padding: '10px',\r\n              border: '1px solid #ddd',\r\n              borderRadius: '20px',\r\n              resize: 'none',\r\n              minHeight: '40px',\r\n              maxHeight: '100px',\r\n              fontFamily: 'inherit'\r\n            }}\r\n            rows=\"1\"\r\n          />\r\n          <button\r\n            onClick={envoyerMessage}\r\n            disabled={isLoading || !inputMessage.trim()}\r\n            style={{\r\n              padding: '10px 15px',\r\n              backgroundColor: isLoading || !inputMessage.trim() ? '#bdc3c7' : '#3498db',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '20px',\r\n              cursor: isLoading || !inputMessage.trim() ? 'not-allowed' : 'pointer',\r\n              minWidth: '50px'\r\n            }}\r\n          >\r\n            {isLoading ? '‚è≥' : 'üöÄ'}\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Suggestions rapides */}\r\n        <div style={{ marginTop: '10px', display: 'flex', gap: '5px', flexWrap: 'wrap' }}>\r\n          {[\"Montre mes habitudes\", \"Cr√©e une habitude sommeil\", \"Statistiques\"].map((suggestion) => (\r\n            <button\r\n              key={suggestion}\r\n              onClick={() => setInputMessage(suggestion)}\r\n              style={{\r\n                padding: '4px 8px',\r\n                backgroundColor: '#ecf0f1',\r\n                border: '1px solid #bdc3c7',\r\n                borderRadius: '12px',\r\n                fontSize: '0.7em',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              {suggestion}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SaifAIChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}