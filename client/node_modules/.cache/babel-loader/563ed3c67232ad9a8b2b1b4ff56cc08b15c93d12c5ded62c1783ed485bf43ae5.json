{"ast":null,"code":"const express = require(\"express\");\nconst axios = require(\"axios\");\nconst router = express.Router();\nconst FUSEKI_URL = process.env.FUSEKI_URL || \"http://localhost:3030/usersDB\";\n\n// ============================================\n// CREATE - Créer un nouveau programme avec relations\n// ============================================\nrouter.post(\"/create\", async (req, res) => {\n  const {\n    type,\n    name,\n    description,\n    duration,\n    goals,\n    userId,\n    assignedToUserId,\n    scoreId,\n    serviceId,\n    etatSanteId,\n    objectifId\n  } = req.body;\n  if (!type || !name || !userId) {\n    return res.status(400).json({\n      success: false,\n      message: \"Type, name, and userId are required\"\n    });\n  }\n  const programId = \"program_\".concat(Date.now());\n  try {\n    let programTTL = \"\";\n    const programClass = type === \"Activity\" ? \"ProgrammeActivite\" : type === \"Sleep\" ? \"ProgrammeSommeil\" : \"ProgrammeNutrition\";\n\n    // Construire le TTL avec les relations\n    programTTL = \"\\n      @prefix ex: <http://example.org/> .\\n      ex:\".concat(programId, \" a ex:\").concat(programClass, \" ;\\n          ex:name \\\"\").concat(name, \"\\\" ;\\n          ex:description \\\"\").concat(description || '', \"\\\" ;\\n          ex:duration \\\"\").concat(duration || '', \"\\\" ;\\n          ex:goals \\\"\").concat(goals || '', \"\\\" ;\\n          ex:createdBy ex:\").concat(userId, \" ;\\n          ex:createdAt \\\"\").concat(new Date().toISOString(), \"\\\" \");\n\n    // Ajouter les relations optionnelles\n    if (assignedToUserId) {\n      programTTL += \";\\n          ex:assignedTo ex:\".concat(assignedToUserId);\n    }\n    if (scoreId) {\n      programTTL += \";\\n          ex:hasScore ex:\".concat(scoreId);\n    }\n    if (serviceId) {\n      programTTL += \";\\n          ex:providedBy ex:\".concat(serviceId);\n    }\n    if (etatSanteId) {\n      programTTL += \";\\n          ex:targetsEtat ex:\".concat(etatSanteId);\n    }\n    if (objectifId) {\n      programTTL += \";\\n          ex:hasObjectif ex:\".concat(objectifId);\n    }\n    programTTL += \" .\";\n    await axios.post(\"\".concat(FUSEKI_URL, \"/data\"), programTTL, {\n      headers: {\n        \"Content-Type\": \"text/turtle\"\n      }\n    });\n    res.status(201).json({\n      success: true,\n      message: \"Program created successfully\",\n      program: {\n        id: programId,\n        type,\n        name,\n        description,\n        duration,\n        goals,\n        relations: {\n          createdBy: userId,\n          assignedTo: assignedToUserId,\n          score: scoreId,\n          service: serviceId,\n          etatSante: etatSanteId,\n          objectif: objectifId\n        }\n      }\n    });\n  } catch (err) {\n    console.error(\"Create program error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// READ - Récupérer tous les programmes AVEC relations\n// ============================================\nrouter.get(\"/all\", async (req, res) => {\n  const query = \"\\n    PREFIX ex: <http://example.org/>\\n    SELECT ?program ?type ?name ?description ?duration ?goals ?createdAt \\n           ?createdBy ?assignedTo ?score ?service ?etatSante ?objectif\\n    WHERE {\\n      ?program a ?type ;\\n               ex:name ?name .\\n      OPTIONAL { ?program ex:description ?description . }\\n      OPTIONAL { ?program ex:duration ?duration . }\\n      OPTIONAL { ?program ex:goals ?goals . }\\n      OPTIONAL { ?program ex:createdAt ?createdAt . }\\n      OPTIONAL { ?program ex:createdBy ?createdBy . }\\n      OPTIONAL { ?program ex:assignedTo ?assignedTo . }\\n      OPTIONAL { ?program ex:hasScore ?score . }\\n      OPTIONAL { ?program ex:providedBy ?service . }\\n      OPTIONAL { ?program ex:targetsEtat ?etatSante . }\\n      OPTIONAL { ?program ex:hasObjectif ?objectif . }\\n      FILTER(?type = ex:ProgrammeActivite || ?type = ex:ProgrammeSommeil || ?type = ex:ProgrammeNutrition)\\n    }\\n    ORDER BY DESC(?createdAt)\\n  \";\n  try {\n    const response = await axios.get(\"\".concat(FUSEKI_URL, \"/query\"), {\n      params: {\n        query\n      },\n      headers: {\n        Accept: \"application/sparql-results+json\"\n      }\n    });\n    const programs = response.data.results.bindings.map(binding => {\n      var _binding$description, _binding$duration, _binding$goals, _binding$createdAt, _binding$createdBy, _binding$assignedTo, _binding$score, _binding$service, _binding$etatSante, _binding$objectif;\n      return {\n        id: binding.program.value.split('/').pop(),\n        type: binding.type.value.split('/').pop(),\n        name: binding.name.value,\n        description: ((_binding$description = binding.description) === null || _binding$description === void 0 ? void 0 : _binding$description.value) || '',\n        duration: ((_binding$duration = binding.duration) === null || _binding$duration === void 0 ? void 0 : _binding$duration.value) || '',\n        goals: ((_binding$goals = binding.goals) === null || _binding$goals === void 0 ? void 0 : _binding$goals.value) || '',\n        createdAt: ((_binding$createdAt = binding.createdAt) === null || _binding$createdAt === void 0 ? void 0 : _binding$createdAt.value) || '',\n        relations: {\n          createdBy: ((_binding$createdBy = binding.createdBy) === null || _binding$createdBy === void 0 ? void 0 : _binding$createdBy.value.split('/').pop()) || null,\n          assignedTo: ((_binding$assignedTo = binding.assignedTo) === null || _binding$assignedTo === void 0 ? void 0 : _binding$assignedTo.value.split('/').pop()) || null,\n          score: ((_binding$score = binding.score) === null || _binding$score === void 0 ? void 0 : _binding$score.value.split('/').pop()) || null,\n          service: ((_binding$service = binding.service) === null || _binding$service === void 0 ? void 0 : _binding$service.value.split('/').pop()) || null,\n          etatSante: ((_binding$etatSante = binding.etatSante) === null || _binding$etatSante === void 0 ? void 0 : _binding$etatSante.value.split('/').pop()) || null,\n          objectif: ((_binding$objectif = binding.objectif) === null || _binding$objectif === void 0 ? void 0 : _binding$objectif.value.split('/').pop()) || null\n        }\n      };\n    });\n    res.json({\n      success: true,\n      programs\n    });\n  } catch (err) {\n    console.error(\"Get programs error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// READ - Récupérer un programme par ID AVEC relations\n// ============================================\nrouter.get(\"/:id\", async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const query = \"\\n    PREFIX ex: <http://example.org/>\\n    SELECT ?type ?name ?description ?duration ?goals ?createdAt \\n           ?createdBy ?assignedTo ?score ?service ?etatSante ?objectif\\n    WHERE {\\n      ex:\".concat(id, \" a ?type ;\\n               ex:name ?name .\\n      OPTIONAL { ex:\").concat(id, \" ex:description ?description . }\\n      OPTIONAL { ex:\").concat(id, \" ex:duration ?duration . }\\n      OPTIONAL { ex:\").concat(id, \" ex:goals ?goals . }\\n      OPTIONAL { ex:\").concat(id, \" ex:createdAt ?createdAt . }\\n      OPTIONAL { ex:\").concat(id, \" ex:createdBy ?createdBy . }\\n      OPTIONAL { ex:\").concat(id, \" ex:assignedTo ?assignedTo . }\\n      OPTIONAL { ex:\").concat(id, \" ex:hasScore ?score . }\\n      OPTIONAL { ex:\").concat(id, \" ex:providedBy ?service . }\\n      OPTIONAL { ex:\").concat(id, \" ex:targetsEtat ?etatSante . }\\n      OPTIONAL { ex:\").concat(id, \" ex:hasObjectif ?objectif . }\\n    }\\n  \");\n  try {\n    var _binding$description2, _binding$duration2, _binding$goals2, _binding$createdAt2, _binding$createdBy2, _binding$assignedTo2, _binding$score2, _binding$service2, _binding$etatSante2, _binding$objectif2;\n    const response = await axios.get(\"\".concat(FUSEKI_URL, \"/query\"), {\n      params: {\n        query\n      },\n      headers: {\n        Accept: \"application/sparql-results+json\"\n      }\n    });\n    if (response.data.results.bindings.length === 0) {\n      return res.status(404).json({\n        success: false,\n        message: \"Program not found\"\n      });\n    }\n    const binding = response.data.results.bindings[0];\n    const program = {\n      id,\n      type: binding.type.value.split('/').pop(),\n      name: binding.name.value,\n      description: ((_binding$description2 = binding.description) === null || _binding$description2 === void 0 ? void 0 : _binding$description2.value) || '',\n      duration: ((_binding$duration2 = binding.duration) === null || _binding$duration2 === void 0 ? void 0 : _binding$duration2.value) || '',\n      goals: ((_binding$goals2 = binding.goals) === null || _binding$goals2 === void 0 ? void 0 : _binding$goals2.value) || '',\n      createdAt: ((_binding$createdAt2 = binding.createdAt) === null || _binding$createdAt2 === void 0 ? void 0 : _binding$createdAt2.value) || '',\n      relations: {\n        createdBy: ((_binding$createdBy2 = binding.createdBy) === null || _binding$createdBy2 === void 0 ? void 0 : _binding$createdBy2.value.split('/').pop()) || null,\n        assignedTo: ((_binding$assignedTo2 = binding.assignedTo) === null || _binding$assignedTo2 === void 0 ? void 0 : _binding$assignedTo2.value.split('/').pop()) || null,\n        score: ((_binding$score2 = binding.score) === null || _binding$score2 === void 0 ? void 0 : _binding$score2.value.split('/').pop()) || null,\n        service: ((_binding$service2 = binding.service) === null || _binding$service2 === void 0 ? void 0 : _binding$service2.value.split('/').pop()) || null,\n        etatSante: ((_binding$etatSante2 = binding.etatSante) === null || _binding$etatSante2 === void 0 ? void 0 : _binding$etatSante2.value.split('/').pop()) || null,\n        objectif: ((_binding$objectif2 = binding.objectif) === null || _binding$objectif2 === void 0 ? void 0 : _binding$objectif2.value.split('/').pop()) || null\n      }\n    };\n    res.json({\n      success: true,\n      program\n    });\n  } catch (err) {\n    console.error(\"Get program error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// UPDATE - Mettre à jour un programme AVEC relations\n// ============================================\nrouter.put(\"/:id\", async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    name,\n    description,\n    duration,\n    goals,\n    assignedToUserId,\n    scoreId,\n    serviceId,\n    etatSanteId,\n    objectifId\n  } = req.body;\n  try {\n    // Supprimer les anciennes propriétés ET relations\n    const deleteQuery = \"\\n      PREFIX ex: <http://example.org/>\\n      DELETE {\\n        ex:\".concat(id, \" ex:name ?oldName .\\n        ex:\").concat(id, \" ex:description ?oldDescription .\\n        ex:\").concat(id, \" ex:duration ?oldDuration .\\n        ex:\").concat(id, \" ex:goals ?oldGoals .\\n        ex:\").concat(id, \" ex:assignedTo ?oldAssigned .\\n        ex:\").concat(id, \" ex:hasScore ?oldScore .\\n        ex:\").concat(id, \" ex:providedBy ?oldService .\\n        ex:\").concat(id, \" ex:targetsEtat ?oldEtat .\\n        ex:\").concat(id, \" ex:hasObjectif ?oldObjectif .\\n      }\\n      WHERE {\\n        OPTIONAL { ex:\").concat(id, \" ex:name ?oldName . }\\n        OPTIONAL { ex:\").concat(id, \" ex:description ?oldDescription . }\\n        OPTIONAL { ex:\").concat(id, \" ex:duration ?oldDuration . }\\n        OPTIONAL { ex:\").concat(id, \" ex:goals ?oldGoals . }\\n        OPTIONAL { ex:\").concat(id, \" ex:assignedTo ?oldAssigned . }\\n        OPTIONAL { ex:\").concat(id, \" ex:hasScore ?oldScore . }\\n        OPTIONAL { ex:\").concat(id, \" ex:providedBy ?oldService . }\\n        OPTIONAL { ex:\").concat(id, \" ex:targetsEtat ?oldEtat . }\\n        OPTIONAL { ex:\").concat(id, \" ex:hasObjectif ?oldObjectif . }\\n      }\\n    \");\n    await axios.post(\"\".concat(FUSEKI_URL, \"/update\"), deleteQuery, {\n      headers: {\n        \"Content-Type\": \"application/sparql-update\"\n      }\n    });\n\n    // Construire la requête INSERT avec relations\n    let insertQuery = \"\\n      PREFIX ex: <http://example.org/>\\n      INSERT DATA {\\n        ex:\".concat(id, \" ex:name \\\"\").concat(name, \"\\\" ;\\n                 ex:description \\\"\").concat(description || '', \"\\\" ;\\n                 ex:duration \\\"\").concat(duration || '', \"\\\" ;\\n                 ex:goals \\\"\").concat(goals || '', \"\\\"\");\n    if (assignedToUserId) {\n      insertQuery += \" ;\\n                 ex:assignedTo ex:\".concat(assignedToUserId);\n    }\n    if (scoreId) {\n      insertQuery += \" ;\\n                 ex:hasScore ex:\".concat(scoreId);\n    }\n    if (serviceId) {\n      insertQuery += \" ;\\n                 ex:providedBy ex:\".concat(serviceId);\n    }\n    if (etatSanteId) {\n      insertQuery += \" ;\\n                 ex:targetsEtat ex:\".concat(etatSanteId);\n    }\n    if (objectifId) {\n      insertQuery += \" ;\\n                 ex:hasObjectif ex:\".concat(objectifId);\n    }\n    insertQuery += \" .\\n      }\\n    \";\n    await axios.post(\"\".concat(FUSEKI_URL, \"/update\"), insertQuery, {\n      headers: {\n        \"Content-Type\": \"application/sparql-update\"\n      }\n    });\n    res.json({\n      success: true,\n      message: \"Program updated successfully\",\n      program: {\n        id,\n        name,\n        description,\n        duration,\n        goals,\n        relations: {\n          assignedTo: assignedToUserId,\n          score: scoreId,\n          service: serviceId,\n          etatSante: etatSanteId,\n          objectif: objectifId\n        }\n      }\n    });\n  } catch (err) {\n    console.error(\"Update program error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// DELETE - Supprimer un programme (inchangé)\n// ============================================\nrouter.delete(\"/:id\", async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const deleteQuery = \"\\n    PREFIX ex: <http://example.org/>\\n    DELETE WHERE {\\n      ex:\".concat(id, \" ?p ?o .\\n    }\\n  \");\n  try {\n    await axios.post(\"\".concat(FUSEKI_URL, \"/update\"), deleteQuery, {\n      headers: {\n        \"Content-Type\": \"application/sparql-update\"\n      }\n    });\n    res.json({\n      success: true,\n      message: \"Program deleted successfully\"\n    });\n  } catch (err) {\n    console.error(\"Delete program error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// Nouvelles routes pour gérer les relations\n// ============================================\n\n// GET - Lister tous les utilisateurs\nrouter.get(\"/relations/users\", async (req, res) => {\n  const query = \"\\n    PREFIX ex: <http://example.org/>\\n    SELECT ?user ?username ?email\\n    WHERE {\\n      ?user a ex:Utilisateur .\\n      OPTIONAL { ?user ex:username ?username . }\\n      OPTIONAL { ?user ex:email ?email . }\\n    }\\n  \";\n  try {\n    const response = await axios.get(\"\".concat(FUSEKI_URL, \"/query\"), {\n      params: {\n        query\n      },\n      headers: {\n        Accept: \"application/sparql-results+json\"\n      }\n    });\n    const users = response.data.results.bindings.map(b => {\n      var _b$username, _b$email;\n      return {\n        id: b.user.value.split('/').pop(),\n        username: ((_b$username = b.username) === null || _b$username === void 0 ? void 0 : _b$username.value) || '',\n        email: ((_b$email = b.email) === null || _b$email === void 0 ? void 0 : _b$email.value) || ''\n      };\n    });\n    res.json({\n      success: true,\n      users\n    });\n  } catch (err) {\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// GET - Lister tous les objectifs\nrouter.get(\"/relations/objectifs\", async (req, res) => {\n  const query = \"\\n    PREFIX ex: <http://example.org/>\\n    SELECT ?objectif ?name ?target\\n    WHERE {\\n      ?objectif a ex:Objectif .\\n      OPTIONAL { ?objectif ex:objectifName ?name . }\\n      OPTIONAL { ?objectif ex:objectifTarget ?target . }\\n    }\\n  \";\n  try {\n    const response = await axios.get(\"\".concat(FUSEKI_URL, \"/query\"), {\n      params: {\n        query\n      },\n      headers: {\n        Accept: \"application/sparql-results+json\"\n      }\n    });\n    const objectifs = response.data.results.bindings.map(b => {\n      var _b$name, _b$target;\n      return {\n        id: b.objectif.value.split('/').pop(),\n        name: ((_b$name = b.name) === null || _b$name === void 0 ? void 0 : _b$name.value) || '',\n        target: ((_b$target = b.target) === null || _b$target === void 0 ? void 0 : _b$target.value) || ''\n      };\n    });\n    res.json({\n      success: true,\n      objectifs\n    });\n  } catch (err) {\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// GET - Lister tous les services médicaux\nrouter.get(\"/relations/services\", async (req, res) => {\n  const query = \"\\n    PREFIX ex: <http://example.org/>\\n    SELECT ?service ?name ?type\\n    WHERE {\\n      ?service a ex:Service_medical .\\n      OPTIONAL { ?service ex:serviceName ?name . }\\n      OPTIONAL { ?service ex:serviceType ?type . }\\n    }\\n  \";\n  try {\n    const response = await axios.get(\"\".concat(FUSEKI_URL, \"/query\"), {\n      params: {\n        query\n      },\n      headers: {\n        Accept: \"application/sparql-results+json\"\n      }\n    });\n    const services = response.data.results.bindings.map(b => {\n      var _b$name2, _b$type;\n      return {\n        id: b.service.value.split('/').pop(),\n        name: ((_b$name2 = b.name) === null || _b$name2 === void 0 ? void 0 : _b$name2.value) || '',\n        type: ((_b$type = b.type) === null || _b$type === void 0 ? void 0 : _b$type.value) || ''\n      };\n    });\n    res.json({\n      success: true,\n      services\n    });\n  } catch (err) {\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// POST - Créer un nouvel utilisateur\n// ============================================\nrouter.post(\"/relations/users/create\", async (req, res) => {\n  const {\n    username,\n    email,\n    age\n  } = req.body;\n  if (!username || !email) {\n    return res.status(400).json({\n      success: false,\n      message: \"Username and email are required\"\n    });\n  }\n  const userId = \"user_\".concat(Date.now());\n  try {\n    const userTTL = \"\\n      @prefix ex: <http://example.org/> .\\n      ex:\".concat(userId, \" a ex:Utilisateur ;\\n          ex:username \\\"\").concat(username, \"\\\" ;\\n          ex:email \\\"\").concat(email, \"\\\" ;\\n          ex:age \").concat(age || 0, \" .\\n    \");\n    await axios.post(\"\".concat(FUSEKI_URL, \"/data\"), userTTL, {\n      headers: {\n        \"Content-Type\": \"text/turtle\"\n      }\n    });\n    res.status(201).json({\n      success: true,\n      message: \"User created successfully\",\n      user: {\n        id: userId,\n        username,\n        email,\n        age\n      }\n    });\n  } catch (err) {\n    console.error(\"Create user error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// POST - Créer un nouvel objectif\n// ============================================\nrouter.post(\"/relations/objectifs/create\", async (req, res) => {\n  const {\n    name,\n    target\n  } = req.body;\n  if (!name) {\n    return res.status(400).json({\n      success: false,\n      message: \"Name is required\"\n    });\n  }\n  const objectifId = \"objectif_\".concat(Date.now());\n  try {\n    const objectifTTL = \"\\n      @prefix ex: <http://example.org/> .\\n      ex:\".concat(objectifId, \" a ex:Objectif ;\\n          ex:objectifName \\\"\").concat(name, \"\\\" ;\\n          ex:objectifTarget \\\"\").concat(target || '', \"\\\" .\\n    \");\n    await axios.post(\"\".concat(FUSEKI_URL, \"/data\"), objectifTTL, {\n      headers: {\n        \"Content-Type\": \"text/turtle\"\n      }\n    });\n    res.status(201).json({\n      success: true,\n      message: \"Objectif created successfully\",\n      objectif: {\n        id: objectifId,\n        name,\n        target\n      }\n    });\n  } catch (err) {\n    console.error(\"Create objectif error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\n\n// ============================================\n// POST - Créer un nouveau service médical\n// ============================================\nrouter.post(\"/relations/services/create\", async (req, res) => {\n  const {\n    name,\n    type\n  } = req.body;\n  if (!name) {\n    return res.status(400).json({\n      success: false,\n      message: \"Name is required\"\n    });\n  }\n  const serviceId = \"service_\".concat(Date.now());\n  try {\n    const serviceTTL = \"\\n      @prefix ex: <http://example.org/> .\\n      ex:\".concat(serviceId, \" a ex:Service_medical ;\\n          ex:serviceName \\\"\").concat(name, \"\\\" ;\\n          ex:serviceType \\\"\").concat(type || '', \"\\\" .\\n    \");\n    await axios.post(\"\".concat(FUSEKI_URL, \"/data\"), serviceTTL, {\n      headers: {\n        \"Content-Type\": \"text/turtle\"\n      }\n    });\n    res.status(201).json({\n      success: true,\n      message: \"Service created successfully\",\n      service: {\n        id: serviceId,\n        name,\n        type\n      }\n    });\n  } catch (err) {\n    console.error(\"Create service error:\", err);\n    res.status(500).json({\n      success: false,\n      error: err.message\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","axios","router","Router","FUSEKI_URL","process","env","post","req","res","type","name","description","duration","goals","userId","assignedToUserId","scoreId","serviceId","etatSanteId","objectifId","body","status","json","success","message","programId","concat","Date","now","programTTL","programClass","toISOString","headers","program","id","relations","createdBy","assignedTo","score","service","etatSante","objectif","err","console","error","get","query","response","params","Accept","programs","data","results","bindings","map","binding","_binding$description","_binding$duration","_binding$goals","_binding$createdAt","_binding$createdBy","_binding$assignedTo","_binding$score","_binding$service","_binding$etatSante","_binding$objectif","value","split","pop","createdAt","_binding$description2","_binding$duration2","_binding$goals2","_binding$createdAt2","_binding$createdBy2","_binding$assignedTo2","_binding$score2","_binding$service2","_binding$etatSante2","_binding$objectif2","length","put","deleteQuery","insertQuery","delete","users","b","_b$username","_b$email","user","username","email","objectifs","_b$name","_b$target","target","services","_b$name2","_b$type","age","userTTL","objectifTTL","serviceTTL","module","exports"],"sources":["C:/Users/ouday/Desktop/web sémantique/client/src/views/HealthPrograms.jsx"],"sourcesContent":["const express = require(\"express\");\r\nconst axios = require(\"axios\");\r\nconst router = express.Router();\r\n\r\nconst FUSEKI_URL = process.env.FUSEKI_URL || \"http://localhost:3030/usersDB\";\r\n\r\n// ============================================\r\n// CREATE - Créer un nouveau programme avec relations\r\n// ============================================\r\nrouter.post(\"/create\", async (req, res) => {\r\n  const { \r\n    type, \r\n    name, \r\n    description, \r\n    duration, \r\n    goals, \r\n    userId,\r\n    assignedToUserId,\r\n    scoreId,\r\n    serviceId,\r\n    etatSanteId,\r\n    objectifId\r\n  } = req.body;\r\n\r\n  if (!type || !name || !userId) {\r\n    return res.status(400).json({\r\n      success: false,\r\n      message: \"Type, name, and userId are required\"\r\n    });\r\n  }\r\n\r\n  const programId = `program_${Date.now()}`;\r\n\r\n  try {\r\n    let programTTL = \"\";\r\n    const programClass = type === \"Activity\" ? \"ProgrammeActivite\" \r\n                       : type === \"Sleep\" ? \"ProgrammeSommeil\" \r\n                       : \"ProgrammeNutrition\";\r\n\r\n    // Construire le TTL avec les relations\r\n    programTTL = `\r\n      @prefix ex: <http://example.org/> .\r\n      ex:${programId} a ex:${programClass} ;\r\n          ex:name \"${name}\" ;\r\n          ex:description \"${description || ''}\" ;\r\n          ex:duration \"${duration || ''}\" ;\r\n          ex:goals \"${goals || ''}\" ;\r\n          ex:createdBy ex:${userId} ;\r\n          ex:createdAt \"${new Date().toISOString()}\" `;\r\n\r\n    // Ajouter les relations optionnelles\r\n    if (assignedToUserId) {\r\n      programTTL += `;\\n          ex:assignedTo ex:${assignedToUserId}`;\r\n    }\r\n    if (scoreId) {\r\n      programTTL += `;\\n          ex:hasScore ex:${scoreId}`;\r\n    }\r\n    if (serviceId) {\r\n      programTTL += `;\\n          ex:providedBy ex:${serviceId}`;\r\n    }\r\n    if (etatSanteId) {\r\n      programTTL += `;\\n          ex:targetsEtat ex:${etatSanteId}`;\r\n    }\r\n    if (objectifId) {\r\n      programTTL += `;\\n          ex:hasObjectif ex:${objectifId}`;\r\n    }\r\n\r\n    programTTL += \" .\";\r\n\r\n    await axios.post(`${FUSEKI_URL}/data`, programTTL, {\r\n      headers: { \"Content-Type\": \"text/turtle\" },\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: \"Program created successfully\",\r\n      program: { \r\n        id: programId, \r\n        type, \r\n        name, \r\n        description, \r\n        duration, \r\n        goals,\r\n        relations: {\r\n          createdBy: userId,\r\n          assignedTo: assignedToUserId,\r\n          score: scoreId,\r\n          service: serviceId,\r\n          etatSante: etatSanteId,\r\n          objectif: objectifId\r\n        }\r\n      }\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Create program error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// READ - Récupérer tous les programmes AVEC relations\r\n// ============================================\r\nrouter.get(\"/all\", async (req, res) => {\r\n  const query = `\r\n    PREFIX ex: <http://example.org/>\r\n    SELECT ?program ?type ?name ?description ?duration ?goals ?createdAt \r\n           ?createdBy ?assignedTo ?score ?service ?etatSante ?objectif\r\n    WHERE {\r\n      ?program a ?type ;\r\n               ex:name ?name .\r\n      OPTIONAL { ?program ex:description ?description . }\r\n      OPTIONAL { ?program ex:duration ?duration . }\r\n      OPTIONAL { ?program ex:goals ?goals . }\r\n      OPTIONAL { ?program ex:createdAt ?createdAt . }\r\n      OPTIONAL { ?program ex:createdBy ?createdBy . }\r\n      OPTIONAL { ?program ex:assignedTo ?assignedTo . }\r\n      OPTIONAL { ?program ex:hasScore ?score . }\r\n      OPTIONAL { ?program ex:providedBy ?service . }\r\n      OPTIONAL { ?program ex:targetsEtat ?etatSante . }\r\n      OPTIONAL { ?program ex:hasObjectif ?objectif . }\r\n      FILTER(?type = ex:ProgrammeActivite || ?type = ex:ProgrammeSommeil || ?type = ex:ProgrammeNutrition)\r\n    }\r\n    ORDER BY DESC(?createdAt)\r\n  `;\r\n\r\n  try {\r\n    const response = await axios.get(`${FUSEKI_URL}/query`, {\r\n      params: { query },\r\n      headers: { Accept: \"application/sparql-results+json\" },\r\n    });\r\n\r\n    const programs = response.data.results.bindings.map(binding => ({\r\n      id: binding.program.value.split('/').pop(),\r\n      type: binding.type.value.split('/').pop(),\r\n      name: binding.name.value,\r\n      description: binding.description?.value || '',\r\n      duration: binding.duration?.value || '',\r\n      goals: binding.goals?.value || '',\r\n      createdAt: binding.createdAt?.value || '',\r\n      relations: {\r\n        createdBy: binding.createdBy?.value.split('/').pop() || null,\r\n        assignedTo: binding.assignedTo?.value.split('/').pop() || null,\r\n        score: binding.score?.value.split('/').pop() || null,\r\n        service: binding.service?.value.split('/').pop() || null,\r\n        etatSante: binding.etatSante?.value.split('/').pop() || null,\r\n        objectif: binding.objectif?.value.split('/').pop() || null\r\n      }\r\n    }));\r\n\r\n    res.json({\r\n      success: true,\r\n      programs\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Get programs error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// READ - Récupérer un programme par ID AVEC relations\r\n// ============================================\r\nrouter.get(\"/:id\", async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  const query = `\r\n    PREFIX ex: <http://example.org/>\r\n    SELECT ?type ?name ?description ?duration ?goals ?createdAt \r\n           ?createdBy ?assignedTo ?score ?service ?etatSante ?objectif\r\n    WHERE {\r\n      ex:${id} a ?type ;\r\n               ex:name ?name .\r\n      OPTIONAL { ex:${id} ex:description ?description . }\r\n      OPTIONAL { ex:${id} ex:duration ?duration . }\r\n      OPTIONAL { ex:${id} ex:goals ?goals . }\r\n      OPTIONAL { ex:${id} ex:createdAt ?createdAt . }\r\n      OPTIONAL { ex:${id} ex:createdBy ?createdBy . }\r\n      OPTIONAL { ex:${id} ex:assignedTo ?assignedTo . }\r\n      OPTIONAL { ex:${id} ex:hasScore ?score . }\r\n      OPTIONAL { ex:${id} ex:providedBy ?service . }\r\n      OPTIONAL { ex:${id} ex:targetsEtat ?etatSante . }\r\n      OPTIONAL { ex:${id} ex:hasObjectif ?objectif . }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const response = await axios.get(`${FUSEKI_URL}/query`, {\r\n      params: { query },\r\n      headers: { Accept: \"application/sparql-results+json\" },\r\n    });\r\n\r\n    if (response.data.results.bindings.length === 0) {\r\n      return res.status(404).json({\r\n        success: false,\r\n        message: \"Program not found\"\r\n      });\r\n    }\r\n\r\n    const binding = response.data.results.bindings[0];\r\n    const program = {\r\n      id,\r\n      type: binding.type.value.split('/').pop(),\r\n      name: binding.name.value,\r\n      description: binding.description?.value || '',\r\n      duration: binding.duration?.value || '',\r\n      goals: binding.goals?.value || '',\r\n      createdAt: binding.createdAt?.value || '',\r\n      relations: {\r\n        createdBy: binding.createdBy?.value.split('/').pop() || null,\r\n        assignedTo: binding.assignedTo?.value.split('/').pop() || null,\r\n        score: binding.score?.value.split('/').pop() || null,\r\n        service: binding.service?.value.split('/').pop() || null,\r\n        etatSante: binding.etatSante?.value.split('/').pop() || null,\r\n        objectif: binding.objectif?.value.split('/').pop() || null\r\n      }\r\n    };\r\n\r\n    res.json({\r\n      success: true,\r\n      program\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Get program error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// UPDATE - Mettre à jour un programme AVEC relations\r\n// ============================================\r\nrouter.put(\"/:id\", async (req, res) => {\r\n  const { id } = req.params;\r\n  const { \r\n    name, \r\n    description, \r\n    duration, \r\n    goals,\r\n    assignedToUserId,\r\n    scoreId,\r\n    serviceId,\r\n    etatSanteId,\r\n    objectifId\r\n  } = req.body;\r\n\r\n  try {\r\n    // Supprimer les anciennes propriétés ET relations\r\n    const deleteQuery = `\r\n      PREFIX ex: <http://example.org/>\r\n      DELETE {\r\n        ex:${id} ex:name ?oldName .\r\n        ex:${id} ex:description ?oldDescription .\r\n        ex:${id} ex:duration ?oldDuration .\r\n        ex:${id} ex:goals ?oldGoals .\r\n        ex:${id} ex:assignedTo ?oldAssigned .\r\n        ex:${id} ex:hasScore ?oldScore .\r\n        ex:${id} ex:providedBy ?oldService .\r\n        ex:${id} ex:targetsEtat ?oldEtat .\r\n        ex:${id} ex:hasObjectif ?oldObjectif .\r\n      }\r\n      WHERE {\r\n        OPTIONAL { ex:${id} ex:name ?oldName . }\r\n        OPTIONAL { ex:${id} ex:description ?oldDescription . }\r\n        OPTIONAL { ex:${id} ex:duration ?oldDuration . }\r\n        OPTIONAL { ex:${id} ex:goals ?oldGoals . }\r\n        OPTIONAL { ex:${id} ex:assignedTo ?oldAssigned . }\r\n        OPTIONAL { ex:${id} ex:hasScore ?oldScore . }\r\n        OPTIONAL { ex:${id} ex:providedBy ?oldService . }\r\n        OPTIONAL { ex:${id} ex:targetsEtat ?oldEtat . }\r\n        OPTIONAL { ex:${id} ex:hasObjectif ?oldObjectif . }\r\n      }\r\n    `;\r\n\r\n    await axios.post(`${FUSEKI_URL}/update`, deleteQuery, {\r\n      headers: { \"Content-Type\": \"application/sparql-update\" },\r\n    });\r\n\r\n    // Construire la requête INSERT avec relations\r\n    let insertQuery = `\r\n      PREFIX ex: <http://example.org/>\r\n      INSERT DATA {\r\n        ex:${id} ex:name \"${name}\" ;\r\n                 ex:description \"${description || ''}\" ;\r\n                 ex:duration \"${duration || ''}\" ;\r\n                 ex:goals \"${goals || ''}\"`;\r\n\r\n    if (assignedToUserId) {\r\n      insertQuery += ` ;\\n                 ex:assignedTo ex:${assignedToUserId}`;\r\n    }\r\n    if (scoreId) {\r\n      insertQuery += ` ;\\n                 ex:hasScore ex:${scoreId}`;\r\n    }\r\n    if (serviceId) {\r\n      insertQuery += ` ;\\n                 ex:providedBy ex:${serviceId}`;\r\n    }\r\n    if (etatSanteId) {\r\n      insertQuery += ` ;\\n                 ex:targetsEtat ex:${etatSanteId}`;\r\n    }\r\n    if (objectifId) {\r\n      insertQuery += ` ;\\n                 ex:hasObjectif ex:${objectifId}`;\r\n    }\r\n\r\n    insertQuery += ` .\r\n      }\r\n    `;\r\n\r\n    await axios.post(`${FUSEKI_URL}/update`, insertQuery, {\r\n      headers: { \"Content-Type\": \"application/sparql-update\" },\r\n    });\r\n\r\n    res.json({\r\n      success: true,\r\n      message: \"Program updated successfully\",\r\n      program: { \r\n        id, \r\n        name, \r\n        description, \r\n        duration, \r\n        goals,\r\n        relations: {\r\n          assignedTo: assignedToUserId,\r\n          score: scoreId,\r\n          service: serviceId,\r\n          etatSante: etatSanteId,\r\n          objectif: objectifId\r\n        }\r\n      }\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Update program error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// DELETE - Supprimer un programme (inchangé)\r\n// ============================================\r\nrouter.delete(\"/:id\", async (req, res) => {\r\n  const { id } = req.params;\r\n\r\n  const deleteQuery = `\r\n    PREFIX ex: <http://example.org/>\r\n    DELETE WHERE {\r\n      ex:${id} ?p ?o .\r\n    }\r\n  `;\r\n\r\n  try {\r\n    await axios.post(`${FUSEKI_URL}/update`, deleteQuery, {\r\n      headers: { \"Content-Type\": \"application/sparql-update\" },\r\n    });\r\n\r\n    res.json({\r\n      success: true,\r\n      message: \"Program deleted successfully\"\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Delete program error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// Nouvelles routes pour gérer les relations\r\n// ============================================\r\n\r\n// GET - Lister tous les utilisateurs\r\nrouter.get(\"/relations/users\", async (req, res) => {\r\n  const query = `\r\n    PREFIX ex: <http://example.org/>\r\n    SELECT ?user ?username ?email\r\n    WHERE {\r\n      ?user a ex:Utilisateur .\r\n      OPTIONAL { ?user ex:username ?username . }\r\n      OPTIONAL { ?user ex:email ?email . }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const response = await axios.get(`${FUSEKI_URL}/query`, {\r\n      params: { query },\r\n      headers: { Accept: \"application/sparql-results+json\" },\r\n    });\r\n\r\n    const users = response.data.results.bindings.map(b => ({\r\n      id: b.user.value.split('/').pop(),\r\n      username: b.username?.value || '',\r\n      email: b.email?.value || ''\r\n    }));\r\n\r\n    res.json({ success: true, users });\r\n  } catch (err) {\r\n    res.status(500).json({ success: false, error: err.message });\r\n  }\r\n});\r\n\r\n// GET - Lister tous les objectifs\r\nrouter.get(\"/relations/objectifs\", async (req, res) => {\r\n  const query = `\r\n    PREFIX ex: <http://example.org/>\r\n    SELECT ?objectif ?name ?target\r\n    WHERE {\r\n      ?objectif a ex:Objectif .\r\n      OPTIONAL { ?objectif ex:objectifName ?name . }\r\n      OPTIONAL { ?objectif ex:objectifTarget ?target . }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const response = await axios.get(`${FUSEKI_URL}/query`, {\r\n      params: { query },\r\n      headers: { Accept: \"application/sparql-results+json\" },\r\n    });\r\n\r\n    const objectifs = response.data.results.bindings.map(b => ({\r\n      id: b.objectif.value.split('/').pop(),\r\n      name: b.name?.value || '',\r\n      target: b.target?.value || ''\r\n    }));\r\n\r\n    res.json({ success: true, objectifs });\r\n  } catch (err) {\r\n    res.status(500).json({ success: false, error: err.message });\r\n  }\r\n});\r\n\r\n// GET - Lister tous les services médicaux\r\nrouter.get(\"/relations/services\", async (req, res) => {\r\n  const query = `\r\n    PREFIX ex: <http://example.org/>\r\n    SELECT ?service ?name ?type\r\n    WHERE {\r\n      ?service a ex:Service_medical .\r\n      OPTIONAL { ?service ex:serviceName ?name . }\r\n      OPTIONAL { ?service ex:serviceType ?type . }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const response = await axios.get(`${FUSEKI_URL}/query`, {\r\n      params: { query },\r\n      headers: { Accept: \"application/sparql-results+json\" },\r\n    });\r\n\r\n    const services = response.data.results.bindings.map(b => ({\r\n      id: b.service.value.split('/').pop(),\r\n      name: b.name?.value || '',\r\n      type: b.type?.value || ''\r\n    }));\r\n\r\n    res.json({ success: true, services });\r\n  } catch (err) {\r\n    res.status(500).json({ success: false, error: err.message });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// POST - Créer un nouvel utilisateur\r\n// ============================================\r\nrouter.post(\"/relations/users/create\", async (req, res) => {\r\n  const { username, email, age } = req.body;\r\n\r\n  if (!username || !email) {\r\n    return res.status(400).json({\r\n      success: false,\r\n      message: \"Username and email are required\"\r\n    });\r\n  }\r\n\r\n  const userId = `user_${Date.now()}`;\r\n\r\n  try {\r\n    const userTTL = `\r\n      @prefix ex: <http://example.org/> .\r\n      ex:${userId} a ex:Utilisateur ;\r\n          ex:username \"${username}\" ;\r\n          ex:email \"${email}\" ;\r\n          ex:age ${age || 0} .\r\n    `;\r\n\r\n    await axios.post(`${FUSEKI_URL}/data`, userTTL, {\r\n      headers: { \"Content-Type\": \"text/turtle\" },\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: \"User created successfully\",\r\n      user: { id: userId, username, email, age }\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Create user error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// POST - Créer un nouvel objectif\r\n// ============================================\r\nrouter.post(\"/relations/objectifs/create\", async (req, res) => {\r\n  const { name, target } = req.body;\r\n\r\n  if (!name) {\r\n    return res.status(400).json({\r\n      success: false,\r\n      message: \"Name is required\"\r\n    });\r\n  }\r\n\r\n  const objectifId = `objectif_${Date.now()}`;\r\n\r\n  try {\r\n    const objectifTTL = `\r\n      @prefix ex: <http://example.org/> .\r\n      ex:${objectifId} a ex:Objectif ;\r\n          ex:objectifName \"${name}\" ;\r\n          ex:objectifTarget \"${target || ''}\" .\r\n    `;\r\n\r\n    await axios.post(`${FUSEKI_URL}/data`, objectifTTL, {\r\n      headers: { \"Content-Type\": \"text/turtle\" },\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: \"Objectif created successfully\",\r\n      objectif: { id: objectifId, name, target }\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Create objectif error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\n// ============================================\r\n// POST - Créer un nouveau service médical\r\n// ============================================\r\nrouter.post(\"/relations/services/create\", async (req, res) => {\r\n  const { name, type } = req.body;\r\n\r\n  if (!name) {\r\n    return res.status(400).json({\r\n      success: false,\r\n      message: \"Name is required\"\r\n    });\r\n  }\r\n\r\n  const serviceId = `service_${Date.now()}`;\r\n\r\n  try {\r\n    const serviceTTL = `\r\n      @prefix ex: <http://example.org/> .\r\n      ex:${serviceId} a ex:Service_medical ;\r\n          ex:serviceName \"${name}\" ;\r\n          ex:serviceType \"${type || ''}\" .\r\n    `;\r\n\r\n    await axios.post(`${FUSEKI_URL}/data`, serviceTTL, {\r\n      headers: { \"Content-Type\": \"text/turtle\" },\r\n    });\r\n\r\n    res.status(201).json({\r\n      success: true,\r\n      message: \"Service created successfully\",\r\n      service: { id: serviceId, name, type }\r\n    });\r\n  } catch (err) {\r\n    console.error(\"Create service error:\", err);\r\n    res.status(500).json({\r\n      success: false,\r\n      error: err.message\r\n    });\r\n  }\r\n});\r\n\r\nmodule.exports = router;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}