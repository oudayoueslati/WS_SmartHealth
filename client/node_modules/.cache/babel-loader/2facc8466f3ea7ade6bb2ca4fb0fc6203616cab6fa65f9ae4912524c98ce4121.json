{"ast":null,"code":"// src/api.js\nconst SERVER_BASE = process.env.REACT_APP_SERVER_BASE || 'http://localhost:5000';\nasync function handleResponse(res) {\n  if (!res.ok) {\n    const txt = await res.text();\n    throw new Error(txt || res.statusText);\n  }\n  return res.json();\n}\n\n/* SERVICES */\nexport async function getServices() {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/services\"));\n  return handleResponse(res); // attend tableau d'objets { id, type, label, uri }\n}\nexport async function createService(body) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/services\"), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  return handleResponse(res);\n}\nexport async function updateService(id, body) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/services/\").concat(encodeURIComponent(id)), {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  return handleResponse(res);\n}\nexport async function deleteService(id) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/services/\").concat(encodeURIComponent(id)), {\n    method: 'DELETE'\n  });\n  return handleResponse(res);\n}\n\n/* PAYMENTS */\nexport async function getPayments(user) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/payments?user=\").concat(encodeURIComponent(user)));\n  const data = await handleResponse(res);\n  return data.payments || data; // Support both formats\n}\nexport async function createPayment(body) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/payments\"), {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  return handleResponse(res);\n}\nexport async function updatePayment(id, body) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/payments/\").concat(encodeURIComponent(id)), {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  return handleResponse(res);\n}\nexport async function deletePayment(id) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/payments/\").concat(encodeURIComponent(id)), {\n    method: 'DELETE'\n  });\n  return handleResponse(res);\n}\nexport async function getPaymentStats(user) {\n  const res = await fetch(\"\".concat(SERVER_BASE, \"/api/payments/stats/\").concat(encodeURIComponent(user)));\n  const data = await handleResponse(res);\n  return data.stats || data;\n}","map":{"version":3,"names":["SERVER_BASE","process","env","REACT_APP_SERVER_BASE","handleResponse","res","ok","txt","text","Error","statusText","json","getServices","fetch","concat","createService","body","method","headers","JSON","stringify","updateService","id","encodeURIComponent","deleteService","getPayments","user","data","payments","createPayment","updatePayment","deletePayment","getPaymentStats","stats"],"sources":["C:/Users/pc/SÃ©mantique/project/WS_SmartHealth/client/src/api.js"],"sourcesContent":["// src/api.js\r\nconst SERVER_BASE = process.env.REACT_APP_SERVER_BASE || 'http://localhost:5000';\r\n\r\nasync function handleResponse(res) {\r\n  if (!res.ok) {\r\n    const txt = await res.text();\r\n    throw new Error(txt || res.statusText);\r\n  }\r\n  return res.json();\r\n}\r\n\r\n/* SERVICES */\r\nexport async function getServices() {\r\n  const res = await fetch(`${SERVER_BASE}/api/services`);\r\n  return handleResponse(res); // attend tableau d'objets { id, type, label, uri }\r\n}\r\nexport async function createService(body) {\r\n  const res = await fetch(`${SERVER_BASE}/api/services`, {\r\n    method: 'POST', headers: { 'Content-Type':'application/json' }, body: JSON.stringify(body)\r\n  });\r\n  return handleResponse(res);\r\n}\r\nexport async function updateService(id, body) {\r\n  const res = await fetch(`${SERVER_BASE}/api/services/${encodeURIComponent(id)}`, {\r\n    method: 'PUT', headers: { 'Content-Type':'application/json' }, body: JSON.stringify(body)\r\n  });\r\n  return handleResponse(res);\r\n}\r\nexport async function deleteService(id) {\r\n  const res = await fetch(`${SERVER_BASE}/api/services/${encodeURIComponent(id)}`, { method: 'DELETE' });\r\n  return handleResponse(res);\r\n}\r\n\r\n/* PAYMENTS */\r\nexport async function getPayments(user) {\r\n  const res = await fetch(`${SERVER_BASE}/api/payments?user=${encodeURIComponent(user)}`);\r\n  const data = await handleResponse(res);\r\n  return data.payments || data; // Support both formats\r\n}\r\nexport async function createPayment(body) {\r\n  const res = await fetch(`${SERVER_BASE}/api/payments`, {\r\n    method: 'POST', headers: { 'Content-Type':'application/json' }, body: JSON.stringify(body)\r\n  });\r\n  return handleResponse(res);\r\n}\r\nexport async function updatePayment(id, body) {\r\n  const res = await fetch(`${SERVER_BASE}/api/payments/${encodeURIComponent(id)}`, {\r\n    method: 'PUT', headers: { 'Content-Type':'application/json' }, body: JSON.stringify(body)\r\n  });\r\n  return handleResponse(res);\r\n}\r\nexport async function deletePayment(id) {\r\n  const res = await fetch(`${SERVER_BASE}/api/payments/${encodeURIComponent(id)}`, { method: 'DELETE' });\r\n  return handleResponse(res);\r\n}\r\nexport async function getPaymentStats(user) {\r\n  const res = await fetch(`${SERVER_BASE}/api/payments/stats/${encodeURIComponent(user)}`);\r\n  const data = await handleResponse(res);\r\n  return data.stats || data;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}