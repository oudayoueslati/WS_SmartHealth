{"ast":null,"code":"// In your EvenementForm component, update the predictAllAttendance function:\n\nconst predictAllAttendance = async () => {\n  setIsPredictingAttendance(true);\n  try {\n    const response = await fetch('http://localhost:5000/ai/predict-all-attendance');\n    if (!response.ok) {\n      // If endpoint returns error, use mock data\n      console.log(\"Endpoint returned error, using mock data\");\n      const mockPredictions = generateMockPredictions();\n      setAttendancePredictions(mockPredictions);\n      showAlert(\"âœ… PrÃ©dictions simulÃ©es gÃ©nÃ©rÃ©es (mode dÃ©mo)!\", \"info\");\n      return;\n    }\n    const result = await response.json();\n    if (result.success) {\n      setAttendancePredictions(result);\n      showAlert(\"âœ… PrÃ©dictions de participation gÃ©nÃ©rÃ©es!\", \"success\");\n    } else {\n      throw new Error(result.error || \"Erreur inconnue\");\n    }\n  } catch (error) {\n    console.error(\"âŒ Erreur prÃ©diction:\", error);\n\n    // Fallback to mock data\n    const mockPredictions = generateMockPredictions();\n    setAttendancePredictions(mockPredictions);\n    showAlert(\"ðŸ”§ Mode dÃ©mo: PrÃ©dictions simulÃ©es affichÃ©es\", \"warning\");\n  } finally {\n    setIsPredictingAttendance(false);\n  }\n};\n\n// Add this mock data generator function\nconst generateMockPredictions = () => {\n  const mockEvents = evenements.slice(0, 5).map(event => {\n    var _event$evenement, _event$aTitle, _event$aLocalisation, _event$psStatus, _event$psDateDebut;\n    return {\n      event: {\n        id: ((_event$evenement = event.evenement) === null || _event$evenement === void 0 ? void 0 : _event$evenement.value.split('#')[1]) || 'mock',\n        title: ((_event$aTitle = event.aTitle) === null || _event$aTitle === void 0 ? void 0 : _event$aTitle.value) || 'Ã‰vÃ©nement sans titre',\n        location: ((_event$aLocalisation = event.aLocalisation) === null || _event$aLocalisation === void 0 ? void 0 : _event$aLocalisation.value) || 'Non spÃ©cifiÃ©',\n        status: ((_event$psStatus = event.psStatus) === null || _event$psStatus === void 0 ? void 0 : _event$psStatus.value) || 'Inconnu',\n        startDate: ((_event$psDateDebut = event.psDateDebut) === null || _event$psDateDebut === void 0 ? void 0 : _event$psDateDebut.value) || ''\n      },\n      prediction: {\n        predictedAttendance: Math.floor(Math.random() * 300) + 50,\n        confidence: parseFloat((0.5 + Math.random() * 0.4).toFixed(2)),\n        factors: [\"Localisation\", \"Statut\", \"Saison\"],\n        prediction_date: new Date().toISOString(),\n        recommendation: \"Analyse basÃ©e sur donnÃ©es similaires\"\n      }\n    };\n  });\n  const totalAttendance = mockEvents.reduce((sum, item) => sum + item.prediction.predictedAttendance, 0);\n  const avgAttendance = Math.round(totalAttendance / mockEvents.length);\n  return {\n    success: true,\n    total_events: mockEvents.length,\n    predictions: mockEvents,\n    statistics: {\n      average_attendance: avgAttendance,\n      total_predicted_attendance: totalAttendance,\n      successful_predictions: mockEvents.length,\n      failed_predictions: 0\n    },\n    source: \"mock_data\"\n  };\n};","map":{"version":3,"names":["predictAllAttendance","setIsPredictingAttendance","response","fetch","ok","console","log","mockPredictions","generateMockPredictions","setAttendancePredictions","showAlert","result","json","success","Error","error","mockEvents","evenements","slice","map","event","_event$evenement","_event$aTitle","_event$aLocalisation","_event$psStatus","_event$psDateDebut","id","evenement","value","split","title","aTitle","location","aLocalisation","status","psStatus","startDate","psDateDebut","prediction","predictedAttendance","Math","floor","random","confidence","parseFloat","toFixed","factors","prediction_date","Date","toISOString","recommendation","totalAttendance","reduce","sum","item","avgAttendance","round","length","total_events","predictions","statistics","average_attendance","total_predicted_attendance","successful_predictions","failed_predictions","source"],"sources":["C:/Users/K/Documents/W/WS_SmartHealth/client/src/views/examples/Evenement.jsx"],"sourcesContent":["// In your EvenementForm component, update the predictAllAttendance function:\n\nconst predictAllAttendance = async () => {\n  setIsPredictingAttendance(true);\n  try {\n    const response = await fetch('http://localhost:5000/ai/predict-all-attendance');\n    \n    if (!response.ok) {\n      // If endpoint returns error, use mock data\n      console.log(\"Endpoint returned error, using mock data\");\n      const mockPredictions = generateMockPredictions();\n      setAttendancePredictions(mockPredictions);\n      showAlert(\"âœ… PrÃ©dictions simulÃ©es gÃ©nÃ©rÃ©es (mode dÃ©mo)!\", \"info\");\n      return;\n    }\n\n    const result = await response.json();\n    \n    if (result.success) {\n      setAttendancePredictions(result);\n      showAlert(\"âœ… PrÃ©dictions de participation gÃ©nÃ©rÃ©es!\", \"success\");\n    } else {\n      throw new Error(result.error || \"Erreur inconnue\");\n    }\n  } catch (error) {\n    console.error(\"âŒ Erreur prÃ©diction:\", error);\n    \n    // Fallback to mock data\n    const mockPredictions = generateMockPredictions();\n    setAttendancePredictions(mockPredictions);\n    showAlert(\"ðŸ”§ Mode dÃ©mo: PrÃ©dictions simulÃ©es affichÃ©es\", \"warning\");\n  } finally {\n    setIsPredictingAttendance(false);\n  }\n};\n\n// Add this mock data generator function\nconst generateMockPredictions = () => {\n  const mockEvents = evenements.slice(0, 5).map(event => ({\n    event: {\n      id: event.evenement?.value.split('#')[1] || 'mock',\n      title: event.aTitle?.value || 'Ã‰vÃ©nement sans titre',\n      location: event.aLocalisation?.value || 'Non spÃ©cifiÃ©',\n      status: event.psStatus?.value || 'Inconnu',\n      startDate: event.psDateDebut?.value || ''\n    },\n    prediction: {\n      predictedAttendance: Math.floor(Math.random() * 300) + 50,\n      confidence: parseFloat((0.5 + Math.random() * 0.4).toFixed(2)),\n      factors: [\"Localisation\", \"Statut\", \"Saison\"],\n      prediction_date: new Date().toISOString(),\n      recommendation: \"Analyse basÃ©e sur donnÃ©es similaires\"\n    }\n  }));\n\n  const totalAttendance = mockEvents.reduce((sum, item) => sum + item.prediction.predictedAttendance, 0);\n  const avgAttendance = Math.round(totalAttendance / mockEvents.length);\n\n  return {\n    success: true,\n    total_events: mockEvents.length,\n    predictions: mockEvents,\n    statistics: {\n      average_attendance: avgAttendance,\n      total_predicted_attendance: totalAttendance,\n      successful_predictions: mockEvents.length,\n      failed_predictions: 0\n    },\n    source: \"mock_data\"\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}